<!DOCTYPE html>
<html>
<head>
  <title>Google Calendar API</title>
  <meta charset='utf-8' />
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <!--Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  <!-- CSS -->
  <link rel="stylesheet" href="./css/site.css">
  <!--JS -->
  <script src="./js/util.js"></script>
  <script src="./js/device.js"></script>
  <script src="./js/deviceInfo.js"></script>
</head>
<body>
  <div class='container'>
    <pre id="content">
    *****
    </pre>
  </div>

  <script>

  
    $(function(){
    	
    	// ユーザエージェントから端末情報を取得
    	var devinfo = getDeviceInfo();
    	var model = devinfo.os
    	var modelArray = devinfo.split(/_|-/); // 「_」or「-」で分割(例：ASUS_XXX → ASUSとXXXに分割)

    	// キー：端末モデル、値：URLのJSONを取得(例：SO-03K：https://item.rakuten.co.jp/x-mall/c/0000000245/)
    	var deviceJson = getDeviceInfoJson();
		
		// HTMLを追記する要素
		var pre = document.getElementById('content');
		var url = null;
	
		modelArray.some(function(model) {
		    
		  // 端末モデルをキーにURLを取得
		  url = deviceJson[model];
		  if(url){ // URLが取得できた場合
			  var textContent = document.createTextNode( devinfo.os + '：' + url);
			  pre.appendChild(textContent);
			  return true;
		  }
		});
    	
    	if(!url){ // URLを取得できなかった場合
    		var textContent = document.createTextNode( devinfo.os);
	    	pre.appendChild(textContent);
    	}
    	
	});
	
	
  </script>
</body>
